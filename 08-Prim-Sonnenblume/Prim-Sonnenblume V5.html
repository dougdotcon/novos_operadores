<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Prim-Sonnenblume â€” reine Î”-Mechanik</title>
<style>
  :root{--bg:#0b1220;--panel:#0f172a;--ink:#e5e7eb;--muted:#9ca3af;--acc:#8b5cf6}
  html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.45 system-ui,Segoe UI,Roboto,Arial}
  .wrap{max-width:820px;margin:0 auto;padding:16px}
  h1{font-size:20px;margin:0 0 10px}
  .card{background:var(--panel);border:1px solid #1f2937;border-radius:14px;padding:14px;margin:14px 0}
  label{display:flex;justify-content:space-between;align-items:center;margin:8px 0 4px;font-weight:600}
  .chip{background:#111827;padding:6px 10px;border-radius:999px;font-variant-numeric:tabular-nums}
  input[type="range"]{width:100%;accent-color:var(--acc);height:34px}
  .row{display:grid;gap:8px;grid-template-columns:1fr 1fr;align-items:center}
  .chk{display:flex;gap:10px;align-items:center}
  canvas{display:block;width:100%;height:420px;border-radius:12px;background:#070d19}
  .meta{color:var(--muted);font-size:13px;margin-top:8px}
</style>
</head>
<body>
<div class="wrap">
  <h1>ğŸŒ» Prim-Sonnenblume â€” ausschlieÃŸlich Î”, Primzeit, Resonanz</h1>

  <div class="card">
    <label>Impulse (K) <span class="chip" id="vK">3000</span></label>
    <input id="rngK" type="range" min="200" max="8000" step="50" value="3000" />
    <label>Zeitskala Î± (Winkel) <span class="chip" id="vA">0.24</span></label>
    <input id="rngA" type="range" min="0.01" max="0.80" step="0.01" value="0.24" />
    <div class="row">
      <label>Radialschritt Î”r <span class="chip" id="vDR">2.4</span></label>
      <label class="chk"><input id="autoDR" type="checkbox" checked />Auto-Î”r</label>
    </div>
    <input id="rngDR" type="range" min="0.5" max="8.0" step="0.1" value="2.4" />
    <label>PunktgrÃ¶ÃŸe <span class="chip" id="vDot">2.5</span></label>
    <input id="rngDot" type="range" min="1" max="6" step="0.5" value="2.5" />
  </div>

  <div class="card">
    <canvas id="sun"></canvas>
    <div class="meta">
      Regeln (unverÃ¤ndert): f(n)=1â‚primâ‚(n), Î´(n)=f(n+1)âŠ•f(n). Bei Î´=1: t+=log(n+1), r+=Î”r, Î¸=Î±Â·t.  
      Resonanz: câ‚–â‚Šâ‚=câ‚–âŠ•câ‚–â‚‹â‚ â†’ Helligkeit. Auto-Î”r wÃ¤hlt Î”r=râ‚˜â‚â‚“/K (nur Wertwahl, keine neue Formel).
    </div>
  </div>
</div>

<script>
  // â€” Primzustand & Impuls â€”
  function isPrime(n){ if(n<2) return false; if(n===2) return true; if(n%2===0) return false;
    for(let i=3;i*i<=n;i+=2){ if(n%i===0) return false; } return true; }
  function* impulses(){ let f=isPrime(0)?1:0; for(let n=0;;n++){ const f1=isPrime(n+1)?1:0; const d=f1^f; if(d===1) yield n; f=f1; } }

  // â€” Canvas â€”
  const C=document.getElementById('sun');
  function fit(h=420){ const dpr=Math.max(1,devicePixelRatio||1); const w=C.clientWidth||360;
    C.width=Math.round(w*dpr); C.height=Math.round(h*dpr);
    const ctx=C.getContext('2d'); ctx.setTransform(dpr,0,0,dpr,0,0); ctx.clearRect(0,0,w,h);
    return {ctx,w,h}; }

  // â€” UI â€”
  const rngK=document.getElementById('rngK'), rngA=document.getElementById('rngA'),
        rngDR=document.getElementById('rngDR'), rngDot=document.getElementById('rngDot'),
        autoDR=document.getElementById('autoDR');
  const vK=document.getElementById('vK'), vA=document.getElementById('vA'),
        vDR=document.getElementById('vDR'), vDot=document.getElementById('vDot');

  let K=+rngK.value, alpha=+rngA.value, dR=+rngDR.value, dot=+rngDot.value, useAuto=true;

  function draw(){
    const {ctx,w,h}=fit(420), cx=w/2, cy=h/2;
    const rMax=0.95*Math.min(cx,cy);
    const step = useAuto ? (rMax/Math.max(1,K)) : dR;

    let t=0, r=0, cPrev=0, cCurr=1;
    const gen=impulses();

    for(let k=1;k<=K;k++){
      const n=gen.next().value;
      const e=Math.log(n+1); t+=e; r+=step;            // Primzeit + Radius
      const theta=alpha*t;                              // Winkel

      const cNext=cPrev^cCurr; cPrev=cCurr; cCurr=cNext; // Resonanz

      const x=cx+r*Math.cos(theta), y=cy+r*Math.sin(theta);
      const L=cCurr?'65%':'35%', hue=(e*20)%360;
      ctx.fillStyle=`hsl(${hue},85%,${L})`;
      ctx.beginPath(); ctx.arc(x,y,dot,0,2*Math.PI); ctx.fill();
    }
  }

  function updateLabels(){ vK.textContent=K; vA.textContent=alpha.toFixed(2);
    vDR.textContent=(useAuto?'auto':dR.toFixed(1)); vDot.textContent=dot.toFixed(1); }
  function redraw(){ updateLabels(); draw(); }
  let raf; const ping=()=>{ if(raf) cancelAnimationFrame(raf); raf=requestAnimationFrame(redraw); };

  rngK.addEventListener('input',e=>{K=+e.target.value; ping();});
  rngA.addEventListener('input',e=>{alpha=+e.target.value; ping();});
  rngDR.addEventListener('input',e=>{dR=+e.target.value; if(!useAuto) ping();});
  rngDot.addEventListener('input',e=>{dot=+e.target.value; ping();});
  autoDR.addEventListener('change',e=>{useAuto=e.target.checked; ping();});
  window.addEventListener('resize', ping);

  redraw();
</script>
</body>
</html> 